{extend name="layout/layout" /}

{block name="cssOrcrsipt"}
<!--<link rel="stylesheet" href="/main.css">-->
<link rel="stylesheet" href="/static/weixin/css/diary_user.css">
<link rel="stylesheet" href="/static/plugin/mescroll/mescroll.min.css">
<link rel="stylesheet" href="/static/plugin/layui/css/layui.css">
<style>

</style>
{/block}

{block name="main"}
{include file="layout:header" /}
<div class="wl-body">
    <header>
        <div class="wl-liebiao">
            <ul>
                <a href="/weixin/index/index"><li>推荐</li></a>
                <a href=/weixin/shop/haveGood""><li>有好货</li></a>
                <a href="/weixin/index/diaryUser"> <li class="actice" >日记</li></a>
            </ul>
        </div>
    </header>
    <!--这里编写主体内容-->
    <div style="width: 100%;min-height: 500px;background: #F4F7F7">
        <div class="wl-diary-center">
            <div id="container" class="mescroll">
                <div id="container-list">

                </div>
            </div>

        </div>

    </div>



</div>

{include file="layout/footer" /}
{/block}

{block name="script"}
<script src="/static/plugin/layui/layui.all.js"></script>
<script src="/static/plugin/mescroll/mescroll.min.js" charset="utf-8"></script>
<script id="templateList" type="text/html">
    {{#  layui.each(d, function(index, item){ }}
    <div class="wl-diary-top">
        <dl><img src="" alt=""  class="wl-diary-img"></dl>
        <dt>我的退你哦按微整史，不想刀的小仙女来看看</dt>
        <dd>
            <img src="" alt=""  onerror='this.src="/static/image/user/tou.png"'>
            <span><span class="wl-diary-name">用户名称</span> <span class="wl-diary-like"><i class="iconfont icon-like"></i>66</span></span>
        </dd>
    </div>
    <div style="clear: both"></div>
    {{#  }); }}
</script>
<script>
    var listObj = {
        params: {type:1},
        searchList: function (page, successCallback, errorCallback) {
            var data = $.extend({}, {page: page.num, page_size: page.size}, listObj.params);
            $.ajax({
                url: '/weixin/api/getDiaryList',
                type: 'post',
                data: data,
                dataType: 'json',
                success: function (res) {
                    successCallback(res.data.rows);
                },

            });
        },
    };
    var mescroll = new MeScroll("container", {
        down:{auto:true},
        up: {
            clearEmptyId: "container-list",
            page: {num: 0,size: 20},
            htmlNodata: '<p class="upwarp-nodata">-- 已加载全部 --</p>',
            isBounce: false,
            noMoreSize: 5,
            empty: {
                icon: "/static/weixin/shop/image/tuoian.png",
                tip: "亲,没有您要找的商品~", //提示
            },
            callback: function(page){
                listObj.searchList(page,function(curPageData){
                    mescroll.endSuccess(curPageData.length);
                    layui.laytpl(templateList.innerHTML).render(curPageData, function(html){
                        $('#container-list').append(html);
                    });
                }, function(){
                    mescroll.endErr();
                });
            }
        }
    });
</script>
{/block}